<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Presupuesto Municipal | Municipalidad de Arica</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
       /* Reset and base styles */
       * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        body {
            background-color: #f5f5f7;
            color: #1d1d1f;
            overflow-x: hidden;
        }
        
        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
        
        /* Header styles */
        header {
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: all 0.4s ease;
        }

        .top-header {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px 5%;
            max-width: 1400px;
            margin: 0 auto;
            text-align: center;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .logo img {
            height: 40px;
            transition: transform 0.3s ease;
        }

        .logo:hover img {
            transform: scale(1.05);
        }

        .logo-text {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-left: 0;
        }

        .logo-text h1 {
            font-size: 24px;
            font-weight: 600;
            letter-spacing: -0.5px;
        }

        .logo-text span {
            font-size: 12px;
            font-weight: 400;
            color: #86868b;
        }
        
        /* Dashboard container */
        .dashboard-container {
            padding: 40px 5%;
            max-width: 1900px;
            margin: 0 auto;
        }
        
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .dashboard-title {
            font-size: 32px;
            font-weight: 600;
            letter-spacing: -0.5px;
        }

        .header-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .pdf-button, .back-button, .capture-button, .fullscreen-button {
            display: flex;
            align-items: center;
            background-color: #06c;
            color: white;
            border: none;
            border-radius: 100px;
            padding: 12px 20px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .back-button {
            background-color: #f5f5f7;
            color: #06c;
        }

        .capture-button {
            background-color: #34c759;
        }

        .fullscreen-button {
            background-color: #ff9500;
        }
        
        .pdf-button:hover, .capture-button:hover, .fullscreen-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(6, 12, 204, 0.3);
        }

        .capture-button:hover {
            background-color: #30d158;
            box-shadow: 0 5px 15px rgba(52, 199, 89, 0.3);
        }

        .fullscreen-button:hover {
            background-color: #ff9f0a;
            box-shadow: 0 5px 15px rgba(255, 149, 0, 0.3);
        }

        .back-button:hover {
            background-color: #e9e9eb;
            transform: translateY(-2px);
        }
        
        .pdf-button:disabled, .capture-button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        /* Responsive iframe styles */
        .dashboard-iframe {
            width: 100%;
            border: none;
            border-radius: 5px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            background-color: white;
            position: relative;
        }
        
        /* Iframe container with ID for PDF capture */
        .iframe-container {
            position: relative;
            margin-bottom: 30px;
        }

        /* Capture preview */
        .capture-preview {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 9999;
            overflow: auto;
        }

        .capture-preview-content {
            position: relative;
            max-width: 90%;
            margin: 50px auto;
            background: white;
            border-radius: 10px;
            padding: 20px;
        }

        .capture-preview img {
            width: 100%;
            height: auto;
            border-radius: 10px;
        }

        .capture-close {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff3b30;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 18px;
        }

        .capture-actions {
            margin-top: 20px;
            text-align: center;
            gap: 10px;
            display: flex;
            justify-content: center;
        }
        
        /* Overlay para mostrar mientras carga el iframe */
        .iframe-loading {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 20px;
            z-index: 10;
        }
        
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #06c;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Loading overlay para PDF */
        .pdf-loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            color: white;
        }

        .pdf-loading-content {
            text-align: center;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .pdf-progress {
            width: 300px;
            height: 6px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }

        .pdf-progress-bar {
            height: 100%;
            background-color: #06c;
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 3px;
        }

        /* Instructions panel */
        .instructions-panel {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .instructions-panel h3 {
            margin-bottom: 15px;
            font-size: 18px;
        }

        .instructions-panel ul {
            list-style: none;
            padding-left: 0;
        }

        .instructions-panel li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .instructions-panel li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #34c759;
            font-weight: bold;
        }
        
        .dashboard-description {
            background-color: white;
            border-radius: 20px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .dashboard-description h3 {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .dashboard-description p {
            font-size: 16px;
            color: #555;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        /* Footer */
        footer {
            background-color: #f5f5f7;
            color: #1d1d1f;
            padding: 60px 5%;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            margin-top: 60px;
        }
        
        .footer-container {
            display: flex;
            justify-content: space-between;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .footer-column {
            flex: 1;
            padding: 0 20px;
        }
        
        .footer-column h3 {
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: 600;
        }
        
        .footer-column p {
            margin-bottom: 10px;
            color: #86868b;
            font-size: 14px;
        }
        
        .footer-column ul {
            list-style: none;
        }
        
        .footer-column ul li {
            margin-bottom: 12px;
        }
        
        .footer-column a {
            color: #06c;
            text-decoration: none;
            font-size: 14px;
            transition: opacity 0.3s ease;
        }
        
        .footer-column a:hover {
            opacity: 0.7;
        }
        
        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .social-icons a {
            background-color: rgba(0, 0, 0, 0.05);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: transform 0.3s ease, background-color 0.3s ease;
        }
        
        .social-icons a:hover {
            transform: translateY(-3px);
            background-color: rgba(0, 0, 0, 0.1);
        }
        
        .footer-bottom {
            max-width: 1400px;
            margin: 40px auto 0;
            padding-top: 20px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            text-align: center;
            font-size: 12px;
            color: #86868b;
        }
        
        /* Assistant chat button */
        .assistant-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: rgba(6, 12, 204, 0.9);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 100;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .assistant-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        /* RESPONSIVE IFRAME HEIGHTS */
        
        /* Pantallas muy grandes (1920px+) */
        @media (min-width: 1920px) {
            .dashboard-iframe {
    width: 100%;
    height: calc(100vh - 200px); /* Altura basada en el viewport menos espacio para header/footer */
    min-height: 400px; /* Altura mínima */
    max-height: 900px; /* Altura máxima */
    border: none;
    border-radius: 5px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    background-color: white;
    position: relative;
}
        }
        
        /* Pantallas grandes (1400px - 1919px) */
        @media (min-width: 1400px) and (max-width: 1919px) {
            .dashboard-iframe {
    width: 100%;
    height: calc(100vh - 200px); /* Altura basada en el viewport menos espacio para header/footer */
    min-height: 400px; /* Altura mínima */
    max-height: 900px; /* Altura máxima */
    border: none;
    border-radius: 5px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    background-color: white;
    position: relative;
}
        }
        
        /* Pantallas medianas-grandes (1200px - 1399px) */
        @media (min-width: 1200px) and (max-width: 1399px) {
            .dashboard-iframe {
    width: 100%;
    height: calc(100vh - 200px); /* Altura basada en el viewport menos espacio para header/footer */
    min-height: 400px; /* Altura mínima */
    max-height: 900px; /* Altura máxima */
    border: none;
    border-radius: 5px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    background-color: white;
    position: relative;
}
        }
        
        /* Pantallas medianas (992px - 1199px) */
        @media (min-width: 992px) and (max-width: 1199px) {
            .dashboard-iframe {
    width: 100%;
    height: calc(100vh - 200px); /* Altura basada en el viewport menos espacio para header/footer */
    min-height: 400px; /* Altura mínima */
    max-height: 900px; /* Altura máxima */
    border: none;
    border-radius: 5px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    background-color: white;
    position: relative;
}
        }
        
        /* Tablets en landscape (768px - 991px) */
        @media (min-width: 768px) and (max-width: 991px) {
            .dashboard-iframe {
    width: 100%;
    height: calc(100vh - 200px); /* Altura basada en el viewport menos espacio para header/footer */
    min-height: 400px; /* Altura mínima */
    max-height: 900px; /* Altura máxima */
    border: none;
    border-radius: 5px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    background-color: white;
    position: relative;
}
        }
        
        /* Tablets en portrait y móviles grandes (576px - 767px) */
        @media (min-width: 576px) and (max-width: 767px) {
            .dashboard-iframe {
    width: 100%;
    height: calc(100vh - 200px); /* Altura basada en el viewport menos espacio para header/footer */
    min-height: 400px; /* Altura mínima */
    max-height: 900px; /* Altura máxima */
    border: none;
    border-radius: 5px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    background-color: white;
    position: relative;
}
        }
        
        /* Móviles (hasta 575px) */
        @media (max-width: 575px) {
            .dashboard-iframe {
    width: 100%;
    height: calc(100vh - 200px); /* Altura basada en el viewport menos espacio para header/footer */
    min-height: 400px; /* Altura mínima */
    max-height: 900px; /* Altura máxima */
    border: none;
    border-radius: 5px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    background-color: white;
    position: relative;
}
            
            .dashboard-title {
                font-size: 20px;
            }
            
            .dashboard-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .header-buttons {
                width: 100%;
                justify-content: space-between;
                flex-wrap: wrap;
                gap: 8px;
            }

            .pdf-button, .capture-button, .fullscreen-button, .back-button {
                padding: 10px 16px;
                font-size: 14px;
                flex: 1;
                min-width: calc(50% - 4px);
            }

            .pdf-loading-content {
                margin: 0 20px;
                padding: 20px;
            }

            .pdf-progress {
                width: 250px;
            }

            .capture-preview-content {
                margin: 20px auto;
                max-width: 95%;
            }
        }

        /* Ajustes específicos para el aspect ratio del contenido */
        @media (min-aspect-ratio: 16/9) {
            .dashboard-iframe {
                height: calc(100vw * 0.5625); /* 16:9 ratio */
                max-height: 800px;
            }
        }

        @media (max-aspect-ratio: 4/3) {
            .dashboard-iframe {
                height: calc(100vw * 0.75); /* 4:3 ratio */
                max-height: 600px;
            }
        }
    </style>
</head>
<body>
    <!-- Loading overlay for PDF generation -->
    <div id="pdfLoadingOverlay" class="pdf-loading-overlay">
        <div class="pdf-loading-content">
            <div class="loader"></div>
            <h3 id="pdfStatusText">Preparando captura...</h3>
            <div class="pdf-progress">
                <div id="pdfProgressBar" class="pdf-progress-bar"></div>
            </div>
            <p id="pdfStepText">Iniciando proceso de captura</p>
        </div>
    </div>

    <!-- Capture Preview Modal -->
    <div id="capturePreview" class="capture-preview">
        <div class="capture-preview-content">
            <button class="capture-close" onclick="closeCapturePreview()">×</button>
            <img id="captureImage" src="" alt="Captura del Dashboard">
            <div class="capture-actions">
                <button class="capture-button" onclick="downloadCapture()">
                    📥 Descargar Imagen
                </button>
                <button class="pdf-button" onclick="createPDFFromCapture()">
                    📄 Crear PDF
                </button>
                <!-- Agregar este botón en el preview de captura -->
<button id="cropElementBtn" onclick="startElementSelection()" 
style="display: none; background: #2196F3; color: white; padding: 10px 15px; 
       border: none; border-radius: 5px; margin: 5px; cursor: pointer;">
✂️ Elemento Específico
</button>
            </div>
        </div>
    </div>

    <!-- Header with logo -->
    <header>
        <div class="top-header">
            <div class="logo">
                <img src="logo_MUNI.png" alt="Logo Municipalidad de Arica">
                <div class="logo-text">
                    <h1>ARICA</h1>
                    <span>MUNICIPALIDAD | mejor ciudad</span>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Dashboard section -->
    <section class="dashboard-container">
        <div class="dashboard-header">
            <h2 class="dashboard-title">Dashboard Abastecimiento</h2>
            <div class="header-buttons">
                <button class="capture-button" onclick="captureScreen()">
                    📸 Capturar Pantalla
                </button>
                <button class="fullscreen-button" onclick="openFullscreen('dashboardIframe1')">
                    🔍 Pantalla Completa
                </button>
                <button class="back-button" onclick="window.location.href='index.html'">
                    ← Volver al Inicio
                </button>
            </div>
        </div>
        
        <!-- Contenedor del iframe con indicador de carga -->
        <div class="iframe-container" id="dashboard1Container">
            <div id="loadingIndicator1" class="iframe-loading">
                <div class="loader"></div>
                <p>Cargando dashboard...</p>
            </div>
            
            <!-- Iframe del dashboard de Looker Studio -->
            <iframe id="dashboardIframe1" class="dashboard-iframe" 
    src="https://lookerstudio.google.com/embed/reporting/4fe9550e-ad4e-4db6-9b03-a78055a9165f/page/p28FF?embed=true&fit=scale"
    allowfullscreen
    onload="hideLoading('loadingIndicator1')"></iframe>
        </div>
    </section>

    <!-- Second Dashboard section -->
    <section class="dashboard-container">
        <div class="dashboard-header">
            <h2 class="dashboard-title">Dashboard Gestión Vehicular</h2>
            <div class="header-buttons">
                <button class="fullscreen-button" onclick="openFullscreen('dashboardIframe2')">
                    🔍 Pantalla Completa
                </button>
            </div>
        </div>

        <div class="iframe-container" id="dashboard2Container">
            <div id="loadingIndicator2" class="iframe-loading">
                <div class="loader"></div>
                <p>Cargando dashboard...</p>
            </div>
            
            <!-- Iframe del dashboard de Looker Studio -->
            <iframe id="dashboardIframe2" class="dashboard-iframe" 
                src="https://lookerstudio.google.com/embed/reporting/1a761723-5ccf-49a0-97e7-5db4fda4ca29/page/FFtFF"
                allowfullscreen
                onload="hideLoading('loadingIndicator2')"></iframe>
        </div>
        
        <div class="dashboard-description">
            <h3>Panel de Abastecimiento y Gestión Vehicular</h3>
            <p>
                Este panel muestra información detallada sobre el abastecimiento de combustible de la flota municipal, en convenio con Copec. 
                Aquí podrás revisar el consumo por vehículo, fechas de carga, montos asociados y seguimiento del gasto en combustible.
            </p>
            <p>
                Además, se incluye un dashboard de mantenimiento vehicular, donde es posible consultar el estado actual de los vehículos municipales, 
                si se encuentran operativos o en reparación, historial de servicios mecánicos y detalles como patentes, tipo de mantenimiento realizado 
                y talleres asociados.
            </p>
            <p>
                <strong>💡 Instrucciones de Captura:</strong> Debido a las restricciones de seguridad de Looker Studio, use el botón "📸 Capturar Pantalla" 
                para obtener imágenes de los dashboards. También puede abrir cada dashboard en pantalla completa para una mejor visualización antes de capturar.
            </p>
            <p><strong>Enlaces directos:</strong> 
                <a href="https://lookerstudio.google.com/embed/reporting/4fe9550e-ad4e-4db6-9b03-a78055a9165f/page/p28FF" target="_blank">
                    Dashboard Combustible
                </a> | 
                <a href="https://lookerstudio.google.com/embed/reporting/1a761723-5ccf-49a0-97e7-5db4fda4ca29/page/FFtFF" target="_blank">
                    Dashboard Vehículos
                </a>
            </p>
        </div>
    </section>
<!-- Instructions Panel -->
<section class="dashboard-container">
    <div class="instructions-panel">
        <h3>📋 Instrucciones para Capturar Dashboards</h3>
        <ul>
            <li>Los dashboards de Looker Studio tienen protección CORS que impide la captura automática</li>
            <li>Use el botón "📸 Capturar Pantalla" para tomar una screenshot manual</li>
            <li>También puede abrir en pantalla completa para mejor visualización</li>
            <li>Para mejores resultados, espere a que los dashboards carguen completamente</li>
            <li>La captura incluirá todo el contenido visible en su pantalla</li>
        </ul>
    </div>
</section>
    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-column">
                <h3>Municipalidad de Arica</h3>
                <p>Renato Rocca, Arica</p>
                <p>Anexo: 6959</p>
                <p>Email: roberto.mamani@municipalidadarica.cl</p>
                <div class="social-icons">
                    <a href="#">📘</a>
                    <a href="#">📱</a>
                    <a href="#">🐦</a>
                    <a href="#">📸</a>
                </div>
            </div>
            <div class="footer-column">
                <h3>Colaboración Interdepartamental</h3>
                <p style="line-height: 1.6;">
                    Este proyecto surge con el propósito de fortalecer la colaboración entre diversas áreas municipales, como <strong>iluminación pública</strong>, <strong>Of. Mantenimiento de Vehículos y Maquinaria</strong>, <strong>Aseo y Ornato</strong>, <strong>Asesoría Técnica</strong> y más, en un solo sistema integral. 
                    Buscando consolidar la información y los procesos en un solo sistema, permitiendo un <strong>mayor control operativo</strong>, <strong>gestión por áreas</strong> y una visión integral para la <strong>mejora continua de los servicios municipales</strong>.
                </p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>© 2025 Municipalidad de Arica. Todos los derechos reservados.</p>
            <p>Desarrollado por Junior Barrera</p>
        </div>
    </footer>
    
    <!-- Assistance button -->
    <div class="assistant-button" onclick="openAssistance()">💬</div>
    <script>// Variables globales
   const _0x20f8bc=_0x3a0d;(function(_0x4bf079,_0x5df3c6){const _0x1655a5=_0x3a0d,_0x3525be=_0x4bf079();while(!![]){try{const _0x3277c8=parseInt(_0x1655a5(0x108))/0x1+parseInt(_0x1655a5(0xa9))/0x2+parseInt(_0x1655a5(0xe3))/0x3*(parseInt(_0x1655a5(0xaf))/0x4)+-parseInt(_0x1655a5(0xdf))/0x5+parseInt(_0x1655a5(0xae))/0x6+-parseInt(_0x1655a5(0xf7))/0x7*(parseInt(_0x1655a5(0xfc))/0x8)+-parseInt(_0x1655a5(0xab))/0x9;if(_0x3277c8===_0x5df3c6)break;else _0x3525be['push'](_0x3525be['shift']());}catch(_0x43066e){_0x3525be['push'](_0x3525be['shift']());}}}(_0x53e0,0x7bfc8));let capturedImageData=null,croppedImageData=null,dashboardsLoaded={'dashboard1':![],'dashboard2':![]},originalImageWidth=0x0,originalImageHeight=0x0,displayScale=0x1;function _0x53e0(){const _0x282e96=['getMinutes','dashboard1','cropCoords','addEventListener','capturePreview','Calidad:\x20Alta\x20resolución\x20-\x20','DOMContentLoaded','captureImage','reload','setFontSize','html2canvas\x20no\x20está\x20disponible','Información\x20del\x20Reporte','min','msRequestFullscreen','warn','mouseup','No\x20se\x20pudo\x20capturar\x20la\x20pantalla\x20automáticamente.\x20\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20Opciones\x20alternativas:\x0a\x20\x20\x20\x201.\x20Use\x20la\x20tecla\x20\x22Impr\x20Pant\x22\x20(Print\x20Screen)\x20de\x20su\x20teclado\x0a\x20\x20\x20\x202.\x20Use\x20la\x20herramienta\x20de\x20captura\x20de\x20Windows\x20(Win\x20+\x20Shift\x20+\x20S)\x0a\x20\x20\x20\x203.\x20En\x20Mac:\x20Cmd\x20+\x20Shift\x20+\x204\x0a\x20\x20\x20\x204.\x20Abra\x20los\x20dashboards\x20en\x20pantalla\x20completa\x20primero\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20El\x20archivo\x20se\x20guardará\x20en\x20su\x20portapapeles\x20o\x20carpeta\x20de\x20descargas.','src','getContext','888442OLpFYy','forEach','4528368TblWHj','putImageData','cropElementBtn','413016YijqRK','39536uBZwUW','high','loadingIndicator1','max','block','display','height','rgba(0,\x200,\x200,\x200.3)','Error\x20al\x20capturar\x20pantalla:','fillStyle','Error\x20al\x20crear\x20PDF:','cssText','strokeStyle','Resolución\x20original:\x20','DIMAO\x20-\x20Dashboard\x20Abastecimiento','padStart','body','appendChild','getElementById','undefined','cropModal','srcObject','mousedown','div','landscape','px\x20(resolución\x20original\x20preservada)','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:\x2015px;\x20text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Recortar\x20Elemento\x20Específico\x20-\x20Alta\x20Calidad</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Arrastre\x20para\x20seleccionar\x20el\x20área\x20que\x20desea\x20recortar</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22font-size:\x2012px;\x20color:\x20#666;\x22>La\x20imagen\x20mantendrá\x20su\x20resolución\x20original</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20center;\x20margin-bottom:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<canvas\x20id=\x22cropCanvas\x22\x20style=\x22max-width:\x20100%;\x20max-height:\x2070vh;\x20border:\x202px\x20solid\x20#ddd;\x20cursor:\x20crosshair;\x22></canvas>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22applyCrop()\x22\x20style=\x22background:\x20#4CAF50;\x20color:\x20white;\x20padding:\x2010px\x2020px;\x20border:\x20none;\x20border-radius:\x205px;\x20margin:\x205px;\x20cursor:\x20pointer;\x22>✂️\x20Aplicar\x20Recorte</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resetCrop()\x22\x20style=\x22background:\x20#ff9800;\x20color:\x20white;\x20padding:\x2010px\x2020px;\x20border:\x20none;\x20border-radius:\x205px;\x20margin:\x205px;\x20cursor:\x20pointer;\x22>🔄\x20Resetear</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22closeCropModal()\x22\x20style=\x22background:\x20#f44336;\x20color:\x20white;\x20padding:\x2010px\x2020px;\x20border:\x20none;\x20border-radius:\x205px;\x20margin:\x205px;\x20cursor:\x20pointer;\x22>❌\x20Cancelar</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','dashboard2','webkitRequestFullscreen','requestFullscreen','PNG','createElement','bold','loadedmetadata','play','Su\x20navegador\x20no\x20soporta\x20captura\x20de\x20pantalla.\x20Use\x20Chrome,\x20Firefox\x20o\x20Edge\x20actualizado.','💬\x20Asistencia\x20Técnica\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20Para\x20soporte\x20con\x20los\x20dashboards\x20contacte:\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20📧\x20Email:\x20roberto.mamani@municipalidadarica.cl\x0a\x20\x20\x20\x20📞\x20Anexo:\x206959\x0a\x20\x20\x20\x20🏢\x20Oficina:\x20Municipalidad\x20de\x20Arica\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20Horario\x20de\x20atención:\x20Lunes\x20a\x20Viernes,\x208:00-17:00hrs\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20¿Necesita\x20ayuda\x20con?\x0a\x20\x20\x20\x20•\x20Acceso\x20a\x20dashboards\x0a\x20\x20\x20\x20•\x20Captura\x20de\x20información\x20en\x20alta\x20calidad\x0a\x20\x20\x20\x20•\x20Recorte\x20de\x20elementos\x20específicos\x0a\x20\x20\x20\x20•\x20Generación\x20de\x20reportes\x0a\x20\x20\x20\x20•\x20Problemas\x20técnicos\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20¡Estamos\x20aquí\x20para\x20ayudarte!','round','setFont','_Recorte_AltaCalidad','width','toLocaleString','getHours','orientationchange','imageSmoothingEnabled','Por\x20favor,\x20seleccione\x20un\x20área\x20primero','mediaDevices','es-CL','319455YFiOay','abs','normal','Fuente:\x20Dashboards\x20Looker\x20Studio','147zGmYiA','toDataURL','image/png','getDate','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x2095vw;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2095vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','text','style','save','Dashboard_Reporte','fillRect','cropCanvas','jspdf','strokeRect','innerHTML','NONE','getDisplayMedia','left','canvas','download','.png','1797817YqdENr','clientX','getImageData','Generado\x20el:\x20','•\x20Dashboard\x20de\x20Abastecimiento\x20de\x20Combustible','8ranbSW','addPage','videoHeight','getBoundingClientRect','_Completa_AltaCalidad','imageSmoothingQuality','Recorte\x20aplicado:\x20','Primero\x20debe\x20capturar\x20una\x20pantalla','innerHeight','innerWidth','top','Nota:\x20Esta\x20captura\x20refleja\x20el\x20estado\x20completo\x20de\x20los\x20dashboards','334349YNOYys','stop','Fecha\x20de\x20captura:\x20','px\x20origen','toString','Anexo:\x206959','drawImage','\x20Horario\x20de\x20atención:\x20Lunes\x20a\x20Viernes,\x208:00-17:00hrs','onload','mousemove','error','getMonth'];_0x53e0=function(){return _0x282e96;};return _0x53e0();}function hideLoading(_0x50960b){const _0x31bc92=_0x3a0d;document[_0x31bc92(0xc1)](_0x50960b)[_0x31bc92(0xe9)][_0x31bc92(0xb4)]='none';if(_0x50960b===_0x31bc92(0xb1))dashboardsLoaded[_0x31bc92(0x115)]=!![];else _0x50960b==='loadingIndicator2'&&(dashboardsLoaded[_0x31bc92(0xca)]=!![]);}async function captureScreen(){const _0x535b06=_0x3a0d;try{if(!navigator[_0x535b06(0xdd)]||!navigator[_0x535b06(0xdd)]['getDisplayMedia']){alert(_0x535b06(0xd2));return;}const _0x4076a4=await navigator[_0x535b06(0xdd)][_0x535b06(0xf2)]({'video':{'mediaSource':'screen','width':{'ideal':0xf00,'max':0xf00},'height':{'ideal':0x870,'max':0x870},'frameRate':{'ideal':0x1e}}}),_0xe9b41e=document[_0x535b06(0xce)]('video');_0xe9b41e[_0x535b06(0xc4)]=_0x4076a4,_0xe9b41e[_0x535b06(0xd1)](),_0xe9b41e[_0x535b06(0x117)](_0x535b06(0xd0),()=>{const _0x556c39=_0x535b06,_0x1c3e59=document[_0x556c39(0xce)](_0x556c39(0xf4));_0x1c3e59[_0x556c39(0xd7)]=_0xe9b41e['videoWidth'],_0x1c3e59[_0x556c39(0xb5)]=_0xe9b41e[_0x556c39(0xfe)],originalImageWidth=_0xe9b41e['videoWidth'],originalImageHeight=_0xe9b41e[_0x556c39(0xfe)];const _0x599377=_0x1c3e59['getContext']('2d');_0x599377['imageSmoothingEnabled']=!![],_0x599377['imageSmoothingQuality']=_0x556c39(0xb0),_0x599377['drawImage'](_0xe9b41e,0x0,0x0),_0x4076a4['getTracks']()[_0x556c39(0xaa)](_0x5e693e=>_0x5e693e[_0x556c39(0x109)]()),capturedImageData=_0x1c3e59[_0x556c39(0xe4)](_0x556c39(0xe5),0x1),croppedImageData=null,showCapturePreview(capturedImageData);});}catch(_0x33e0be){console[_0x535b06(0x112)](_0x535b06(0xb7),_0x33e0be),alert(_0x535b06(0xa6));}}function showCapturePreview(_0x7406b2){const _0x2c0b03=_0x3a0d,_0x4cf3f4=document[_0x2c0b03(0xc1)](_0x2c0b03(0x11b));_0x4cf3f4[_0x2c0b03(0xa7)]=_0x7406b2,document[_0x2c0b03(0xc1)](_0x2c0b03(0x118))[_0x2c0b03(0xe9)]['display']=_0x2c0b03(0xb3),document[_0x2c0b03(0xc1)](_0x2c0b03(0xad))[_0x2c0b03(0xe9)][_0x2c0b03(0xb4)]='inline-block';}function startElementSelection(){const _0x743e8f=_0x3a0d;if(!capturedImageData){alert(_0x743e8f(0x103));return;}createCropModal();}function createCropModal(){const _0x66a81f=_0x3a0d;let _0x325711=document[_0x66a81f(0xc1)](_0x66a81f(0xc3));if(!_0x325711){_0x325711=document['createElement']('div'),_0x325711['id']=_0x66a81f(0xc3),_0x325711[_0x66a81f(0xe9)][_0x66a81f(0xba)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,0,0,0.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x2010000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const _0x4ccc6e=document[_0x66a81f(0xce)](_0x66a81f(0xc6));_0x4ccc6e[_0x66a81f(0xe9)][_0x66a81f(0xba)]=_0x66a81f(0xe7),_0x4ccc6e[_0x66a81f(0xf0)]=_0x66a81f(0xc9),_0x325711[_0x66a81f(0xc0)](_0x4ccc6e),document[_0x66a81f(0xbf)]['appendChild'](_0x325711);}_0x325711['style']['display']='flex',setupCropCanvas();}function setupCropCanvas(){const _0x48a543=_0x3a0d,_0x35c218=document[_0x48a543(0xc1)]('cropCanvas'),_0x1b80f9=_0x35c218[_0x48a543(0xa8)]('2d');_0x1b80f9[_0x48a543(0xdb)]=!![],_0x1b80f9[_0x48a543(0x101)]=_0x48a543(0xb0);const _0xf12737=new Image();_0xf12737[_0x48a543(0x110)]=function(){const _0x91f38e=_0x48a543,_0xb94383=Math['min'](window[_0x91f38e(0x105)]*0.8,0x4b0),_0x28e30d=Math['min'](window[_0x91f38e(0x104)]*0.6,0x320);let _0x378c96=_0xf12737['width'],_0xce1ffc=_0xf12737['height'];_0x378c96>_0xb94383&&(_0xce1ffc=_0xce1ffc*_0xb94383/_0x378c96,_0x378c96=_0xb94383),_0xce1ffc>_0x28e30d&&(_0x378c96=_0x378c96*_0x28e30d/_0xce1ffc,_0xce1ffc=_0x28e30d),displayScale=Math['min'](_0x378c96/_0xf12737[_0x91f38e(0xd7)],_0xce1ffc/_0xf12737['height']),_0x35c218[_0x91f38e(0xd7)]=_0x378c96,_0x35c218[_0x91f38e(0xb5)]=_0xce1ffc,_0x35c218['style'][_0x91f38e(0xd7)]=_0x378c96+'px',_0x35c218[_0x91f38e(0xe9)][_0x91f38e(0xb5)]=_0xce1ffc+'px',_0x1b80f9['drawImage'](_0xf12737,0x0,0x0,_0x378c96,_0xce1ffc),setupCanvasSelection(_0x35c218,_0x1b80f9,_0xf12737,displayScale);},_0xf12737[_0x48a543(0xa7)]=capturedImageData;}function setupCanvasSelection(_0x39d46d,_0xd17e6a,_0x3d6e2e,_0x3a21eb){const _0xb5ff35=_0x3a0d;let _0x187186=![],_0x525ba0,_0x164e4c,_0x58529e,_0x212edd,_0xbbc084;const _0x42d150=()=>{const _0x16e396=_0x3a0d;_0xbbc084=_0xd17e6a[_0x16e396(0xf9)](0x0,0x0,_0x39d46d['width'],_0x39d46d[_0x16e396(0xb5)]);};_0x42d150(),_0x39d46d['addEventListener'](_0xb5ff35(0xc5),_0x529e3b=>{const _0x5eeafd=_0xb5ff35;_0x187186=!![];const _0x337987=_0x39d46d[_0x5eeafd(0xff)]();_0x525ba0=_0x529e3b['clientX']-_0x337987[_0x5eeafd(0xf3)],_0x164e4c=_0x529e3b['clientY']-_0x337987[_0x5eeafd(0x106)],_0x58529e=_0x525ba0,_0x212edd=_0x164e4c;}),_0x39d46d['addEventListener'](_0xb5ff35(0x111),_0xf9bf3e=>{const _0x3444b7=_0xb5ff35;if(!_0x187186)return;const _0x5a599a=_0x39d46d['getBoundingClientRect']();_0x58529e=_0xf9bf3e[_0x3444b7(0xf8)]-_0x5a599a['left'],_0x212edd=_0xf9bf3e['clientY']-_0x5a599a[_0x3444b7(0x106)],_0xd17e6a[_0x3444b7(0xac)](_0xbbc084,0x0,0x0),_0xd17e6a[_0x3444b7(0xbb)]='#ff0000',_0xd17e6a['lineWidth']=0x2,_0xd17e6a['setLineDash']([0x5,0x5]),_0xd17e6a[_0x3444b7(0xef)](_0x525ba0,_0x164e4c,_0x58529e-_0x525ba0,_0x212edd-_0x164e4c),_0xd17e6a[_0x3444b7(0xb8)]=_0x3444b7(0xb6),_0xd17e6a[_0x3444b7(0xec)](0x0,0x0,_0x39d46d['width'],_0x39d46d[_0x3444b7(0xb5)]),_0xd17e6a['clearRect'](_0x525ba0,_0x164e4c,_0x58529e-_0x525ba0,_0x212edd-_0x164e4c);const _0x334998=Math[_0x3444b7(0x120)](_0x525ba0,_0x58529e),_0x202527=Math[_0x3444b7(0x120)](_0x164e4c,_0x212edd),_0x2cbe60=Math[_0x3444b7(0xe0)](_0x58529e-_0x525ba0),_0x44fba4=Math[_0x3444b7(0xe0)](_0x212edd-_0x164e4c),_0x21cbdc=_0x334998/_0x3a21eb,_0x48b047=_0x202527/_0x3a21eb,_0x1f968b=_0x2cbe60/_0x3a21eb,_0xb7f9a0=_0x44fba4/_0x3a21eb;_0xd17e6a[_0x3444b7(0x10e)](_0x3d6e2e,_0x21cbdc,_0x48b047,_0x1f968b,_0xb7f9a0,_0x334998,_0x202527,_0x2cbe60,_0x44fba4);}),_0x39d46d['addEventListener'](_0xb5ff35(0xa5),()=>{const _0xb1fb37=_0xb5ff35;_0x187186=![],_0x39d46d[_0xb1fb37(0x116)]={'displayStartX':Math[_0xb1fb37(0x120)](_0x525ba0,_0x58529e),'displayStartY':Math[_0xb1fb37(0x120)](_0x164e4c,_0x212edd),'displayEndX':Math['max'](_0x525ba0,_0x58529e),'displayEndY':Math[_0xb1fb37(0xb2)](_0x164e4c,_0x212edd),'originalImg':_0x3d6e2e,'scale':_0x3a21eb};});}function applyCrop(){const _0x5a2319=_0x3a0d,_0x732ac7=document[_0x5a2319(0xc1)](_0x5a2319(0xed));if(!_0x732ac7[_0x5a2319(0x116)]){alert(_0x5a2319(0xdc));return;}const {displayStartX:_0x49d21a,displayStartY:_0x522a88,displayEndX:_0x45544b,displayEndY:_0x590435,originalImg:_0x22f32d,scale:_0x4fa644}=_0x732ac7[_0x5a2319(0x116)],_0x25aa76=Math[_0x5a2319(0xd4)](_0x49d21a/_0x4fa644),_0x1dc483=Math[_0x5a2319(0xd4)](_0x522a88/_0x4fa644),_0x161158=Math['round']((_0x45544b-_0x49d21a)/_0x4fa644),_0x1bbbe7=Math[_0x5a2319(0xd4)]((_0x590435-_0x522a88)/_0x4fa644),_0x530c8f=document[_0x5a2319(0xce)](_0x5a2319(0xf4));_0x530c8f['width']=_0x161158,_0x530c8f[_0x5a2319(0xb5)]=_0x1bbbe7;const _0x34443a=_0x530c8f[_0x5a2319(0xa8)]('2d');_0x34443a['imageSmoothingEnabled']=!![],_0x34443a[_0x5a2319(0x101)]=_0x5a2319(0xb0),_0x34443a[_0x5a2319(0x10e)](_0x22f32d,_0x25aa76,_0x1dc483,_0x161158,_0x1bbbe7,0x0,0x0,_0x161158,_0x1bbbe7),croppedImageData=_0x530c8f[_0x5a2319(0xe4)](_0x5a2319(0xe5),0x1),document[_0x5a2319(0xc1)](_0x5a2319(0x11b))[_0x5a2319(0xa7)]=croppedImageData,closeCropModal(),console['log'](_0x5a2319(0x102)+_0x161158+'x'+_0x1bbbe7+_0x5a2319(0xc8));}function _0x3a0d(_0x2dff6d,_0x24f292){const _0x53e05c=_0x53e0();return _0x3a0d=function(_0x3a0d6a,_0x45a725){_0x3a0d6a=_0x3a0d6a-0xa3;let _0x563539=_0x53e05c[_0x3a0d6a];return _0x563539;},_0x3a0d(_0x2dff6d,_0x24f292);}function resetCrop(){const _0x4c1064=_0x3a0d,_0x12e5cf=document['getElementById'](_0x4c1064(0xed)),_0x164e4a=_0x12e5cf['getContext']('2d'),_0x3df8a9=new Image();_0x3df8a9[_0x4c1064(0x110)]=function(){const _0x5cdd8c=_0x4c1064;_0x164e4a[_0x5cdd8c(0xdb)]=!![],_0x164e4a[_0x5cdd8c(0x101)]=_0x5cdd8c(0xb0),_0x164e4a[_0x5cdd8c(0x10e)](_0x3df8a9,0x0,0x0,_0x12e5cf[_0x5cdd8c(0xd7)],_0x12e5cf['height']),_0x12e5cf[_0x5cdd8c(0x116)]=null;},_0x3df8a9['src']=capturedImageData,document['getElementById']('capturePreview')[_0x4c1064(0xe9)]['display']===_0x4c1064(0xb3)&&(document['getElementById'](_0x4c1064(0x11b))[_0x4c1064(0xa7)]=capturedImageData,croppedImageData=null);}function closeCropModal(){const _0x1bba38=_0x3a0d,_0x34ad97=document[_0x1bba38(0xc1)]('cropModal');_0x34ad97&&(_0x34ad97['style'][_0x1bba38(0xb4)]='none');}function closeCapturePreview(){const _0x37a6d0=_0x3a0d;document[_0x37a6d0(0xc1)](_0x37a6d0(0x118))[_0x37a6d0(0xe9)][_0x37a6d0(0xb4)]='none',document[_0x37a6d0(0xc1)](_0x37a6d0(0xad))[_0x37a6d0(0xe9)][_0x37a6d0(0xb4)]='none',croppedImageData=null;}function downloadCapture(){const _0x446b42=_0x3a0d,_0x540093=croppedImageData||capturedImageData;if(!_0x540093)return;const _0x4c7999=document[_0x446b42(0xce)]('a'),_0x439ea9=croppedImageData?_0x446b42(0xd6):_0x446b42(0x100),_0x4a8501=new Date(),_0x1199bd=_0x4a8501['getFullYear']()+'-'+(_0x4a8501['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'-'+_0x4a8501['getDate']()[_0x446b42(0x10c)]()[_0x446b42(0xbe)](0x2,'0'),_0x26694a=_0x4a8501[_0x446b42(0xd9)]()[_0x446b42(0x10c)]()[_0x446b42(0xbe)](0x2,'0')+'-'+_0x4a8501[_0x446b42(0x114)]()[_0x446b42(0x10c)]()['padStart'](0x2,'0');_0x4c7999[_0x446b42(0xf5)]='Dashboard'+_0x439ea9+'_'+_0x1199bd+'_'+_0x26694a+_0x446b42(0xf6),_0x4c7999['href']=_0x540093,_0x4c7999['click']();}function createPDFFromCapture(){const _0xbe228f=_0x3a0d,_0x2219c5=croppedImageData||capturedImageData;if(!_0x2219c5)return;try{const {jsPDF:_0x1cbbac}=window[_0xbe228f(0xee)],_0x477f8d=new _0x1cbbac({'orientation':_0xbe228f(0xc7),'unit':'mm','format':'a4'});_0x477f8d[_0xbe228f(0x11d)](0x10),_0x477f8d[_0xbe228f(0xd5)](undefined,_0xbe228f(0xcf));const _0x57ef3b=croppedImageData?_0xbe228f(0xbd):_0xbe228f(0xbd);_0x477f8d['text'](_0x57ef3b,0x14,0x14),_0x477f8d['setFontSize'](0xa),_0x477f8d[_0xbe228f(0xd5)](undefined,_0xbe228f(0xe1)),_0x477f8d[_0xbe228f(0xe8)](_0xbe228f(0xfa)+new Date()[_0xbe228f(0xd8)](_0xbe228f(0xde)),0x14,0x1e);croppedImageData?(_0x477f8d[_0xbe228f(0xe8)]('Tipo:\x20Panel\x20de\x20control\x20abastecimiento\x20de\x20combustible',0x14,0x23),_0x477f8d[_0xbe228f(0xe8)](_0xbe228f(0x119)+originalImageWidth+'x'+originalImageHeight+_0xbe228f(0x10b),0x14,0x28)):_0x477f8d[_0xbe228f(0xe8)](_0xbe228f(0xbc)+originalImageWidth+'x'+originalImageHeight+'px',0x14,0x23);const _0x2715c0=0xfa,_0x210c89=0x8c;_0x477f8d['addImage'](_0x2219c5,_0xbe228f(0xcd),0x14,0x32,_0x2715c0,_0x210c89,'',_0xbe228f(0xf1)),_0x477f8d[_0xbe228f(0xfd)](),_0x477f8d[_0xbe228f(0x11d)](0xe),_0x477f8d['setFont'](undefined,_0xbe228f(0xcf)),_0x477f8d[_0xbe228f(0xe8)](_0xbe228f(0x11f),0x14,0x1e),_0x477f8d[_0xbe228f(0x11d)](0xa),_0x477f8d['setFont'](undefined,_0xbe228f(0xe1));const _0x326a02=[_0xbe228f(0x10a)+new Date()['toLocaleString'](_0xbe228f(0xde)),_0xbe228f(0xbc)+originalImageWidth+'x'+originalImageHeight+'px',_0xbe228f(0xe2),'','Dashboards:',_0xbe228f(0xfb),'',croppedImageData?_0xbe228f(0x107):_0xbe228f(0x107),croppedImageData?_0xbe228f(0x10f):_0xbe228f(0x10f),'','Contacto:\x20roberto.mamani@municipalidadarica.cl',_0xbe228f(0x10d)];let _0x5c139b=0x32;_0x326a02[_0xbe228f(0xaa)](_0x5d0699=>{_0x477f8d['text'](_0x5d0699,0x14,_0x5c139b),_0x5c139b+=0x6;});const _0x330625=croppedImageData?'_Recorte_AltaCalidad':_0xbe228f(0x100),_0x10fd47=new Date(),_0x358934=_0x10fd47['getFullYear']()+'-'+(_0x10fd47[_0xbe228f(0x113)]()+0x1)[_0xbe228f(0x10c)]()[_0xbe228f(0xbe)](0x2,'0')+'-'+_0x10fd47[_0xbe228f(0xe6)]()['toString']()[_0xbe228f(0xbe)](0x2,'0'),_0x5e402d=_0x10fd47['getHours']()[_0xbe228f(0x10c)]()[_0xbe228f(0xbe)](0x2,'0')+'-'+_0x10fd47[_0xbe228f(0x114)]()[_0xbe228f(0x10c)]()[_0xbe228f(0xbe)](0x2,'0'),_0x3c1863=_0xbe228f(0xeb)+_0x330625+'_'+_0x358934+'_'+_0x5e402d+'.pdf';_0x477f8d[_0xbe228f(0xea)](_0x3c1863),closeCapturePreview();}catch(_0xe87c65){console[_0xbe228f(0x112)](_0xbe228f(0xb9),_0xe87c65),alert('Error\x20al\x20generar\x20PDF.\x20Intente\x20descargar\x20la\x20imagen\x20directamente.');}}function openFullscreen(_0x2f9145){const _0x18ca47=_0x3a0d,_0xc22dbc=document[_0x18ca47(0xc1)](_0x2f9145);if(_0xc22dbc[_0x18ca47(0xcc)])_0xc22dbc[_0x18ca47(0xcc)]();else{if(_0xc22dbc[_0x18ca47(0xcb)])_0xc22dbc[_0x18ca47(0xcb)]();else _0xc22dbc['msRequestFullscreen']&&_0xc22dbc[_0x18ca47(0xa3)]();}}function openAssistance(){const _0x18013b=_0x3a0d;alert(_0x18013b(0xd3));}document[_0x20f8bc(0x117)](_0x20f8bc(0x11a),function(){const _0x5e71a7=_0x20f8bc;console['log']('Dashboard\x20Municipal\x20-\x20Sistema\x20de\x20alta\x20calidad\x20cargado\x20correctamente'),typeof html2canvas===_0x5e71a7(0xc2)&&console[_0x5e71a7(0xa4)](_0x5e71a7(0x11e)),typeof window['jspdf']===_0x5e71a7(0xc2)&&console['warn']('jsPDF\x20no\x20está\x20disponible');}),window[_0x20f8bc(0x117)](_0x20f8bc(0xda),function(){setTimeout(()=>{const _0x3e6e22=_0x3a0d;location[_0x3e6e22(0x11c)]();},0x1f4);});
</script>
    
</body>
</html>